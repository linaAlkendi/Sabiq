<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>سجل الأعطال - SABIQ</title>

  <!-- CSS -->
  <link rel="stylesheet" href="../css/header.css" />
  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/base.css" />
  <link rel="stylesheet" href="../css/detailed-log.css" />
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet" />
</head>
<body>

  <!-- الهيدر -->
  <header class="top-bar">
    <!-- زر الوضع الليلي  -->
    <label class="theme-toggle-switch">
      <input type="checkbox" id="theme-toggle-switch">
      <span class="slider">
        <!-- شمس SVG -->
        <svg class="icon sun-icon" viewBox="0 0 24 24" fill="currentColor">
          <path
            d="M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.8 1.42-1.42zm10.45-1.79l-1.79 1.8 1.42 1.42 1.79-1.8-1.42-1.42zM12 4V1h-1v3h1zm0 19v-3h-1v3h1zm8-8h3v-1h-3v1zm-19 0h3v-1H1v1zm2.05 7.05l1.8-1.79-1.42-1.42-1.79 1.8 1.41 1.41zm15.9 0l1.41-1.41-1.79-1.8-1.42 1.42 1.8 1.79zM12 6a6 6 0 100 12A6 6 0 0012 6z" />
        </svg>
        <!-- هلال SVG -->
        <svg class="icon moon-icon" viewBox="0 0 24 24" fill="currentColor">
          <path d="M21 12.79A9 9 0 0 1 11.21 3 7 7 0 1 0 21 12.79z" />
        </svg>
      </span>
    </label>
    <!-- زر المنيو -->
    <button class="menu-toggle" id="menuToggle">☰</button>
    <!-- القائمة الجانبية -->
    <aside class="side-menu" id="sideMenu">
      <br><br><br>
      <nav class="menu-nav">
        <ul>
          <li><a href="dashboard.html">لوحة التحكم</a></li>
          <li><a href="notifications.html">التنبيهات</a></li>
          <li><a href="log.html">سجل الأعطال</a></li>
          <li><a href="new-report.html">رفع بلاغ</a></li>
          <li><a href="reports.html">البلاغات</a></li>
          <li><a href="settings.html">الإعدادات</a></li>
        </ul>
      </nav>
      <div class="menu-footer">
        <a href="index.html" class="logout-link">تسجيل الخروج</a>
      </div>
    </aside>
    <a href="dashboard.html">
      <img src="../assets/sabiqLogoLight.png" alt="SABIQ Logo" class="logo">
    </a>
    <h1>سجل الأعطال </h1>

  </header>

  <!-- المحتوى -->
  <main class="logs-section">
    <h2>سجل الأعطال السابقة</h2>

    <!-- الفلاتر -->
    <div class="filters-container">
      <div class="filter-box">
        <label for="typeFilter">تصفية حسب نوع العطل:</label>
        <select id="typeFilter">
          <option value="all">الكل</option>
          <option value="كهربائي">كهربائي</option>
          <option value="ميكانيكي">ميكانيكي</option>
        </select>
      </div>

      <div class="filter-box">
        <label for="facilityTypeFilter">تصفية حسب نوع المرفق:</label>
        <select id="facilityTypeFilter">
          <option value="all">كل المرافق</option>
          <option value="بوابة إلكترونية">بوابة إلكترونية</option>
          <option value="سلم كهربائي">سلم كهربائي</option>
          <option value="مصعد">مصعد</option>
        </select>
      </div>
    </div>

    <!-- الجدول -->
    <div class="table-wrapper">
      <table class="logs-table" id="logsTable">
        <thead>
  <tr>
    <th>نوع المرفق</th>
    <th>اسم المرفق</th>
    <th>تاريخ العطل</th>
    <th>نوع العطل</th>
    <th>مدة التوقف</th>
    <th>سبب المشكلة</th>
    <th>الإجراء المتخذ</th>
    <th>اسم الفني</th>
    <th>درجة الخطورة</th>
  </tr>
</thead>
<tbody>
  <tr data-index="0">
    <td>بوابة إلكترونية</td>
    <td>بوابة إلكترونية A</td>
    <td>2025-06-01</td>
    <td>كهربائي</td>
    <td>2 ساعة</td>
    <td>انقطاع كهربائي مفاجئ</td>
    <td>إعادة تشغيل النظام واستبدال الكابل التالف</td>
    <td>فهد العتيبي</td>
    <td>عالية</td>
  </tr>
  <tr data-index="1">
    <td>سلم كهربائي</td>
    <td>سلم كهربائي 1</td>
    <td>2025-05-28</td>
    <td>ميكانيكي</td>
    <td>1.5 ساعة</td>
    <td>انحشار في أحد التروس</td>
    <td>تنظيف وتشحيم الأجزاء المتحركة</td>
    <td>سارة الحربي</td>
    <td>متوسطة</td>
  </tr>
  <tr data-index="2">
    <td>مصعد</td>
    <td>مصعد 5</td>
    <td>2025-05-15</td>
    <td>كهربائي</td>
    <td>45 دقيقة</td>
    <td>خلل في وحدة التحكم</td>
    <td>إعادة برمجة وحدة التحكم واستبدال الفيوز</td>
    <td>علي القحطاني</td>
    <td>عالية</td>
  </tr>
  <tr data-index="3">
    <td>مصعد</td>
    <td>مصعد 3</td>
    <td>2025-04-22</td>
    <td>كهربائي</td>
    <td>3 ساعات</td>
    <td>تلف في القاطع الرئيسي</td>
    <td>استبدال القاطع وفحص التوصيلات</td>
    <td>نور العبدالله</td>
    <td>عالية</td>
  </tr>
  <tr data-index="4">
    <td>سلم كهربائي</td>
    <td>سلم كهربائي 2</td>
    <td>2025-03-18</td>
    <td>ميكانيكي</td>
    <td>1 ساعة</td>
    <td>احتكاك مفرط في السلسلة الداخلية</td>
    <td>تشحيم وتعديل المحاذاة</td>
    <td>ماجد السبيعي</td>
    <td>متوسطة</td>
  </tr>
  <tr data-index="5">
    <td>بوابة إلكترونية</td>
    <td>بوابة إلكترونية B</td>
    <td>2025-02-05</td>
    <td>كهربائي</td>
    <td>30 دقيقة</td>
    <td>تلف في حساس الفتح</td>
    <td>استبدال الحساس وضبط المعايرة</td>
    <td>خالد العنزي</td>
    <td>منخفضة</td>
  </tr>
</tbody>

      </table>
    </div>

    <!-- التفاصيل -->
    <section id="detailsSection" class="hidden">
      <h3>الإجراءات المتخذة</h3>
      <div class="actions-section" id="actionContent"></div>

      <h3>المرفقات</h3>
      <div class="attachments">
        <div class="attachment">
          <a href="#" target="_blank" id="pdfLink" class="pdf-link">📄 تقرير صيانة PDF</a>
        </div>
      </div>
    </section>

    <!-- تنبيه ذكي -->
    <section id="predictiveAlert" style="display:none; background:#fff3cd; color:#856404; padding:16px; margin-top:20px; border-radius:12px; box-shadow:0 0 10px rgba(0,0,0,0.1); text-align:center;">
      ⚠️ تنبيه ذكي: يتوقع حدوث عطل في <strong id="predictedFacility"></strong>. يُنصح بالصيانة الوقائية.
    </section>
  </main>

  <!-- JS -->
  <script src="../js/header.js"></script>
  <script src="../js/theme.js"></script>
  <script src="../js/detailed-log.js"></script>
</body>
</html>
